---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "guance_alertpolicy Resource - guance"
subcategory: ""
description: |-
  Alert Policy
  Alert policy is a set of rules that define when to trigger an alert. You can create alert policies for your data
  sources, and set up alert targets to receive alerts.
  Guance Cloud supports alert policy management for the results of monitor checks, by sending alert notification emails or
  group message notifications, so that you can know about the abnormal data situation of the monitoring in time, find
  problems, and solve problems.
  Relationships:
  ```mermaid
  graph LR
  A[Monitor] --> B[Alert Policy] --> C[Notification]
  ```
  Notes:
  When a monitor is created, an alert policy must be selected, and the default is selected by default;When a certain alert policy is deleted, the monitor under the deleted alert policy will automatically be classified
  into the default.
  Create
  The first let me create a resource. We will send the create operation to the resource management service
  ```terraform
  variable "dingtalkwebhook" {
    type = string
  }
  variable "dingtalksecret" {
    type = string
  }
  variable "email" {
    type = string
  }
  data "guance_members" "demo" {
    filter = [
      {
        name   = "email"
        values = [var.email]
      }
    ]
  }
  resource "guancemembergroup" "demo" {
    name       = "oac-demo"
    memberids = data.guance_members.demo.items[*].id
  }
  resource "guancenotification" "demo" {
    name            = "oac-demo"
    type            = "dingtalkrobot"
    dingtalkrobot = {
      webhook = var.dingtalkwebhook
      secret  = var.dingtalk_secret
    }
  }
  resource "guancealertpolicy" "demo" {
    name           = "oac-demo"
    silenttimeout = "1h"
  statuses = [
      "critical",
      "error",
      "warning",
      "info",
      "ok",
      "nodata",
      "nodataok",
      "nodataas_ok",
    ]
  alerttargets = [
      {
        type         = "membergroup"
        membergroup = {
          id = guancemembergroup.demo.id
        }
      },
      {
        type         = "notification"
        notification = {
          id = guance_notification.demo.id
        }
      }
    ]
  }
  ```
---

# guance_alertpolicy (Resource)

# Alert Policy

Alert policy is a set of rules that define when to trigger an alert. You can create alert policies for your data
sources, and set up alert targets to receive alerts.

Guance Cloud supports alert policy management for the results of monitor checks, by sending alert notification emails or
group message notifications, so that you can know about the abnormal data situation of the monitoring in time, find
problems, and solve problems.

Relationships:

```mermaid
graph LR

A[Monitor] --> B[Alert Policy] --> C[Notification]
```

Notes:

1. When a monitor is created, an alert policy must be selected, and the default is selected by default;
2. When a certain alert policy is deleted, the monitor under the deleted alert policy will automatically be classified
   into the default.

## Create

The first let me create a resource. We will send the create operation to the resource management service

```terraform
variable "ding_talk_webhook" {
  type = string
}

variable "ding_talk_secret" {
  type = string
}

variable "email" {
  type = string
}

data "guance_members" "demo" {
  filter = [
    {
      name   = "email"
      values = [var.email]
    }
  ]
}

resource "guance_membergroup" "demo" {
  name       = "oac-demo"
  member_ids = data.guance_members.demo.items[*].id
}

resource "guance_notification" "demo" {
  name            = "oac-demo"
  type            = "ding_talk_robot"
  ding_talk_robot = {
    webhook = var.ding_talk_webhook
    secret  = var.ding_talk_secret
  }
}

resource "guance_alertpolicy" "demo" {
  name           = "oac-demo"
  silent_timeout = "1h"

  statuses = [
    "critical",
    "error",
    "warning",
    "info",
    "ok",
    "nodata",
    "nodata_ok",
    "nodata_as_ok",
  ]

  alert_targets = [
    {
      type         = "member_group"
      member_group = {
        id = guance_membergroup.demo.id
      }
    },
    {
      type         = "notification"
      notification = {
        id = guance_notification.demo.id
      }
    }
  ]
}
```



<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `name` (String) Alert Policy Name
- `statuses` (List of String) The status value of the event to be sent

### Optional

- `alert_targets` (Attributes List) Alert Action (see [below for nested schema](#nestedatt--alert_targets))
- `silent_timeout` (String) Silent timeout timestamp

### Read-Only

- `created_at` (String) Timestamp of the last Terraform update of the order.
- `id` (String) Numeric identifier of the order.

<a id="nestedatt--alert_targets"></a>
### Nested Schema for `alert_targets`

Required:

- `type` (String) Alert type

Optional:

- `member_group` (Attributes) Member Group (see [below for nested schema](#nestedatt--alert_targets--member_group))
- `notification` (Attributes) Notification (see [below for nested schema](#nestedatt--alert_targets--notification))

<a id="nestedatt--alert_targets--member_group"></a>
### Nested Schema for `alert_targets.member_group`

Required:

- `id` (String) Member Group


<a id="nestedatt--alert_targets--notification"></a>
### Nested Schema for `alert_targets.notification`

Required:

- `id` (String) Notification


